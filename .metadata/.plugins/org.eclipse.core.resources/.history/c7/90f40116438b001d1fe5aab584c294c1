package com.bit;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Scanner;

class StudentInfo implements Serializable{

	private static final long serialVersionUID = 1L;
	int stuNum;
	int korScore, engScore, mathScore;
	
}
public class Ex09 {
	 
//	public static void fileRead() {
////		InputStream is = null;
////		ObjectInputStream ois = null;
////		
////		try {
////			File f = new File("studentList.txt");
////			is = new FileInputStream(f);
////			ois = new ObjectInputStream(is);
////			
////			ArrayList<StudentInfo> studentList = (ArrayList<StudentInfo>)ois.readObject();					
////			
//////			System.out.println(ois.readObject());
////			System.out.println("===================================================");
////			System.out.println("학번\t국어\t영어\t수학");
////			for (int i = 0; i < studentList.size(); i++) {
////				System.out.print(studentList.get(i).stuNum+"\t"
////						+studentList.get(i).korScore+"\t"
////						+studentList.get(i).engScore+"\t"
////						+studentList.get(i).mathScore+"\t");
////			}
//////			System.out.println(studentList);
////			System.out.println("===================================================");
////			
////			
////			
////			
////			
////			if(ois!=null)ois.close();
////			if(is!=null)is.close();
//		} catch (FileNotFoundException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		} catch (IOException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		} catch (ClassNotFoundException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
		
//	}
	
	public static void main(String[] args) {
		System.out.println("학생성적관리프로그램(ver 0.5.0)");
		Scanner sc = new Scanner(System.in);
		int input;
//		
		OutputStream os = null;
//		InputStream is = null;
		ObjectOutputStream oos = null;
//		ObjectInputStream ois = null;
		StudentInfo studentInfo;
		ArrayList<StudentInfo> studentList;

		while(true){
			try {
				File f = new File("studentList.txt");
				InputStream is = null;
				ObjectInputStream ois = null;
				
				studentList = new ArrayList<StudentInfo>();
				
				is = new FileInputStream(f);
				ois = new ObjectInputStream(is);
				
				try {
					studentList = (ArrayList<StudentInfo>)ois.readObject();
				} catch (ClassNotFoundException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				}	
				
				System.out.print("1.리스트 2.보기 3.입력 4.수정 5.삭제 0.종료");
				input = sc.nextInt();
				if(input==0) { //시스템 종료
					System.out.println("시스템이 종료됩니다.");
					break; 
				}
				
				else if(input==1) { //리스트
					

					
					try {

				
						
//						System.out.println(ois.readObject());
						System.out.println("===================================================");
						System.out.println("학번\t국어\t영어\t수학");
						for (int i = 0; i < studentList.size(); i++) {
							System.out.print(studentList.get(i).stuNum+"\t"
									+studentList.get(i).korScore+"\t"
									+studentList.get(i).engScore+"\t"
									+studentList.get(i).mathScore+"\t");
						}
						System.out.println();
						System.out.println("===================================================");

						if(ois!=null)ois.close();
						if(is!=null)is.close();

					}catch (Exception e) {
						// TODO: handle exception
						System.out.println(e);
					}
				}
				
				else if(input==2) { //보기
					System.out.println("보기");			
				}
				else if(input==3) { //입력
					
					os = new FileOutputStream(f);
					oos = new ObjectOutputStream(os);
					
					
					
					studentInfo = new StudentInfo();
					
					System.out.print("학번 >");
					studentInfo.stuNum = sc.nextInt();
					System.out.print("국어 >");
					studentInfo.korScore = sc.nextInt();
					System.out.print("영어 >");
					studentInfo.engScore = sc.nextInt();
					System.out.print("수학 >");
					studentInfo.mathScore = sc.nextInt();
					
					studentList.add(studentInfo);
					
					oos.writeObject(studentList);
					
					oos.close();
					os.close();
				}
				else if(input==4) { //수정
					System.out.println("수정");
				}
				else if(input==5) { //삭제
					System.out.println("삭제");
				}
				

//				if(oos!=null)oos.close();
//				if(os!=null)os.close();

			} catch (FileNotFoundException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} 
			
			
		}
	}
}
